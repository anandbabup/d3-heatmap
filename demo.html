<html>

<head>
    <script src="//d3js.org/d3.v4.min.js"></script>
    <script src="//d3js.org/d3-scale-chromatic.v1.min.js"></script>
    <script src="scale.js"></script>
</head>

<body>
    <svg id="seqX" width="100" height="50"></svg> A)100px - 1000 points<br />
    <br />
    <svg id="seqY" width="100" height="50"></svg> B) 100px - 500 points<br />
    <br />
    <br />

    <canvas id="canvas" width="100" height="50"></canvas> C) Unique colors from A (~370 => 100)
    <script>
        var colorA = "purple", colorB = "orange";
        var color1 = [];
        var color2 = [];

        var tempWidth = 0;

        var x1 = [];
        var x2 = [];

        var y1 = [];
        var y2 = [];

        function drawScale1(id, interpolator) {
            var data = Array.from(Array(1000).keys());

            var cScale = d3.scaleSequential()
                .interpolator(interpolator)
                .domain([0, 999]);

            var xScale = d3.scaleLinear()
                .domain([0, 999])
                .range([0, 99]);

            var u = d3.select("#" + id)
                .selectAll("rect")
                .data(data)
                .enter()
                .append("rect")
                //.attr("x", (d) => Math.floor(xScale(d)))
                .attr("x", (d) => { x1.push(Math.floor(xScale(d))); return Math.floor(xScale(d)); })
                .attr("y", 0)
                .attr("height", 40)
                .attr("width", (d) => {
                    if (d == 999) {
                        return 6;
                    }
                    return Math.floor(xScale(d + 1)) - Math.floor(xScale(d)) + 1;
                })
                .attr("fill", (d) => { color1.push(cScale(d)); return cScale(d); });
        }

        drawScale1("seqX", d3.interpolate(colorA, colorB));


        function drawScale2(id, interpolator) {
            var data = Array.from(Array(500).keys());

            var cScale = d3.scaleSequential()
                .interpolator(interpolator)
                .domain([0, 499]);

            var xScale = d3.scaleLinear()
                .domain([0, 499])
                .range([0, 99]);

            var u = d3.select("#" + id)
                .selectAll("rect")
                .data(data)
                .enter()
                .append("rect")
                //.attr("x", (d) => Math.floor(xScale(d)))
                .attr("x", (d) => { x2.push(Math.floor(xScale(d))); return Math.floor(xScale(d)); })
                .attr("y", 0)
                .attr("height", 40)
                .attr("width", (d) => {
                    if (d == 499) {
                        return 6;
                    }
                    return Math.floor(xScale(d + 1)) - Math.floor(xScale(d)) + 1;
                })
                .attr("fill", (d) => { color2.push(cScale(d)); return cScale(d); });
        }

        drawScale2("seqY", d3.interpolate(colorA, colorB));

        function drawUsingUnique() {
            var colors = getUniqueColors(color1);
            var z = visual.scaleLinear().domain([0, colors.length]).range([0, 100]);
            var c = document.getElementById("canvas");
            var ctx = c.getContext("2d");
            for (let index = 0; index < 100; index++) {
                //const element = array[index];
                ctx.fillStyle = colors[Math.floor(z(index))];
                ctx.fillRect(index, 0, 1, 40);                
            }
        }
        drawUsingUnique();

        function duplicate(arr) {
            var object = {};
            var result = [];
            var duplicateCount = 0;

            arr.forEach(function (item) {
                if (!object[item])
                    object[item] = 0;
                object[item] += 1;
            })

            for (var prop in object) {
                if (object[prop] >= 2) {
                    duplicateCount += object[prop] - 1;
                    result.push(prop);
                }
            }
            console.log(duplicateCount);
            //return result;
        }

        function getUniqueColors(arr) {

            var object = {};

            arr.forEach(function (item) {
                if (!object[item])
                    object[item] = 0;
                object[item] += 1;
            })

            var uniqueColors = Object.keys(object);
            console.log(uniqueColors);

            return uniqueColors;
            //return result;

        }


       
    </script>
</body>

</html>